### 变量

- **定义变量**:  **`name=123` 等号两边不能有空格**
- **使用变量**:  **`$name` 或 `${name}`**
- **只读变量**:  **`readonly name`**
- **删除变量**:  **`usnset name`** **(不能删除只读变量)**

| 变量分类 | &nbsp;                              |
| -------- | ----------------------------------- |
| 本地变量 | 只在当前进程内有效                  |
| 环境变量 | 在当前进程内有效,也能够被子进程调用 |
| 全局变量 | 对所有用户都有效                    |
| 系统变量 |

#### 输入变量

```shell
read 变量名
    -p           #指定要显示的提示
　  -s           #输入不显示
　  -n N         #指定输入的字符长度N
　  -d '字符'     #指定结束符
　  -t N         #指定输入时间为N秒
```

#### 交互式输入变量

```shell
read 变量名 < 文件名    #将文件内容输入
```

#### 定义类型变量

```shell
declare 变量名=变量值
    -i      #整数类型
    -r      #只读类型
    -a      #普通数组
    -A      #关联数组
    -x      #环境变量
```

#### 新建环境变量

```shell
export 变量名=变量值
```

#### 查看环境变量

- **\# env**

#### 查看所有变量

- **\# set**

### 字符串

| 类型           | 定义            | 解释                         |
| -------------- | --------------- | ---------------------------- |
| 单引号         | **str='name'**  | 单引号里变量是无效的         |
| 双引号         | **str="name"**  | 双引号里可以有变量和转义字符 |
| 获取字符串长度 | **\${#str}**    | 输出 4                       |
| 提取子字符串   | **\${str:1:4}** | 输出 ame (2 到 4 个字符)     |

### 数组

- 定义数组

```shell
array=(value0 value1 value2)
```

- 读取数组

```shell
${array[1]}=value1
```

- 获取数组的长度

```shell
${#array[@]}
${#array[*]}
${#array[n]}
```

- 获取数组的下标

```shell
${!array[@]}
```

### Shell 重定向

| 数字 | 定义         |
| ---- | ------------ |
| 0    | 标准输入     |
| 1    | 标准输出     |
| 2    | 标准错误输出 |
| &    | 所有输出     |

- **/dev/null** 黑洞文件,输入进的**内容被全部删除**
  
  **输出重定向** 把输出结果和错误保存到对应文件里
  
  - \# 命令 >文件名 **结果覆盖原文件内容** >>\# 命令 >>文件名 **结果保存到文件末尾** >>\# 命令 2>文件名 **错误消息保存到文件中**

> **输入重定向** 把对应文件里的内容输入到命令里
>
> > \# 命令 < 文件名
> > \# 命令 <<

### 注释

- **单行注释**&nbsp;&nbsp;&nbsp;# 开头

- **多行注释**&nbsp;&nbsp;&nbsp;
        :<<EOF/!&nbsp;&nbsp;&nbsp;开头  
        **EOF/!**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;结束
  
- **传递参数**
  
  **\# ./文件名 参数1 参数2 参数3**

| 参数        | 作用                                           |
| ----------- | ---------------------------------------------- |
| **\$#**     | 参数个数                                       |
| **\$\***    | 显示所有传递的参数,输出"$1 $2 $3...$n"         |
| **\$\$**    | 运行的当前进程 ID 号                           |
| **\$!**     | 后台运行的最后一个进程的 ID 号                 |
| **\$@**     | 在引号中返回每个参数,输出"$1" "$2" "$3"..."$n" |
| **\$-**     | 显示 Shell 使用的当前选项                      |
| **\$?**     | 显示最后命令的退出状态,0 为正常,非 0 为错误    |
| **\$1-\$9** | 显示位置参数                                   |

### Shell 函数

```Shell
#定义
function 函数名{
    return value
}
函数名(){
    return value
}
#调用
函数名 参数1 参数2 参数3
```

### 算术运算符

```shell
a=10  b=20
val=`expr $a + $b`      a+b=30
    `expr $a - $b`      a-b=-10
    `expr $a \* $b`     a*b=200
    `expr $b / $a`      b/a=2
    `expr $b % $a`      b%a=0
```

### 四则运算

```shell
$((a+-*/%b))
$[a+-*/%b]
```

### 关系运算符

```shell
[ $a -eq $b ]	# 括号和内容之间必须有空格
	-eq	    #检测两个数是否相等,相当于 ==
	-ne	    #检测两个数是否不相等,相当于 !=
	-gt	    #检测左边的数是否大于右边的,相当于 >
	-lt	    #检测左边的数是否小于右边的,相当于 <
	-ge	    #检测左边的数是否大于等于右边的,相当于 >=
	-le	    #检测左边的数是否小于等于右边的,相当于 <=
```

### 布尔运算符

```shell
[ $a -o $b ]
	!	    #非运算
	-o	    #或运算
	-a	    #与运算
```

### 字符串运算符

```shell
[ -z $a ]
	=	    #检测两个字符串是否相等
	!=	    #检测两个字符串是否相等
	-z	    #检测字符串长度是否为0
	-n	    #检测字符串长度是否不为0
	$	    #检测字符串是否为空
```

### 文件测试运算符

```shell
[ -b $file ]
	-b 文件名	#检测文件是否是块设备文件
	-c 文件名	#检测文件是否是字符设备文件
	-d 文件名	#检测文件是否是目录
	-f 文件名	#检测文件是否是普通文件(既不是目录，也不是设备文件)
	-g 文件名	#检测文件是否设置了 SGID 位
	-k 文件名	#检测文件是否设置了粘着位
	-p 文件名	#检测文件是否是有名管道
	-u 文件名	#检测文件是否设置了 SUID 位
	-r 文件名	#检测文件是否可读
	-w 文件名	#检测文件是否可写
	-x 文件名	#检测文件是否可执行
	-s 文件名	#检测文件是否为空
	-e 文件名	#检测文件(包括目录)是否存在
```

### echo 命令

```shell
echo "字符串"           #打印字符串
echo -e "字符串 \n"     #显示换行
echo -e "字符串 \c"     #显示不换行
echo "字符串" > file    #显示结果定向至文件
echo `命令`             #显示命令执行结果
```

### test 命令

```shell
#用于检查某个条件是否成立
if test [ $a -eq $b ]
#成立返回 true
#不成立返回 false
```

### 流程控制

#### if 语句

```shell
if 判断条件
then
    #执行语句
elif 判断条件
then
    #执行语句
else
    #执行语句
fi
```

#### for 循环变

```shell
#量在范围内执行语句
for 变量名 in 范围
do
    #执行语句
done
```

#### while 循环

```shell
#条件为 true 时执行语句,直至条件为 false 时停止
whole 判断条件
do
    #执行语句
done
```

#### until 循环

```shell
#条件为 false 时执行语句,直至条件为 true 时停止
until 判断条件
do
    #执行语句
done
```

#### case 语句多选择语句

```shell
case 变量名 in
    值1) #执行语句
    ;;
    值2) #执行语句
    ;;
    值3) #执行语句
    ;;
    *)   #执行语句   //无匹配值时输出
    ;;
esac
```